version: 0.1
phases:
  install:
    commands:
      - curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
      - . ~/.nvm/nvm.sh
      - nvm install 18
      - node -v
      - npm install @wdio/cli@latest @wdio/local-runner @wdio/spec-reporter webdriverio typescript ts-node @wdio/mocha-framework @wdio/appium-service
  pre_test:
    commands:
      - echo Preparing test environment...
  test:
    commands:
      - node_modules/.bin/wdio run wdio.conf.ts
  post_test:
    commands:
      - echo Test execution complete.
artifacts:
  - node_modules/**/wdio-logs/*.log
  - test-results/*.xml
  - test-results/*.json
  - test-results/*.log
  - screenshots/*.png
devicePool: TopDevice
